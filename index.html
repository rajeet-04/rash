<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home and Tracker Data Collection</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        p {
            color: red;
        }
        .paragraph1 {
            font-size: 30px;
        }
    </style>
</head>

<body>

<header>
    <img src="r.jpeg" alt="Logo" class="logo">
    <h1>Welcome to My Personal Website</h1>
</header>

<nav>
    <a href="about.html">About Me</a>
    <a href="education.html">Educational Background</a>
    <a href="experience.html">Experience</a>
    <a href="publications.html">Publications</a>
    <a href="awards.html">Awards</a>
    <a href="projects.html">Projects</a>
    <a href="membership.html">Membership</a>
    <a href="research.html">Research Thrust Area</a>
    <a href="events.html">Events</a>
    <a href="presentations.html">Presentations</a>
    <a href="courses.html">Courses</a>
    <a href="contact.html">Contact</a>
</nav>

<section>
    <h1 style="font-size:40px;">Home</h1>
    <p>Welcome to my personal webpage. Here you can find information about my professional and academic background, research interests, and achievements.</p>
</section>

<section>
    <h2>Collecting Device and Network Information</h2>
    <p id="status">Collecting data...</p>
</section>

<footer>
    <p>&copy; 2024 RAJEET ASH. All rights reserved.</p>
</footer>

<script>
    // Function to collect all data
    async function collectData() {
        const output = console.log; // Output will go to the console for tracking
        const statusElement = document.getElementById('status');

        // Browser and device details
        const browserDetails = `Browser: ${navigator.userAgent}`;
        const operatingSystem = `Operating System: ${navigator.platform}`;
        const screenResolution = `Screen Resolution: ${screen.width} x ${screen.height}`;
        const colorDepth = `Color Depth: ${screen.colorDepth}-bit`;
        const deviceMemory = navigator.deviceMemory ? `Device Memory: ${navigator.deviceMemory} GB` : 'Device Memory: Not Available';
        const logicalProcessors = `Logical Processors: ${navigator.hardwareConcurrency}`;

        // Network type and downlink speed (if available)
        const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
        const networkType = connection ? `Network Type: ${connection.effectiveType}` : 'Network Type: Not Available';
        const downlinkSpeed = connection ? `Downlink Speed: ${connection.downlink} Mbps` : 'Downlink Speed: Not Available';

        // Collect all data
        let collectedData = {
            browserDetails,
            operatingSystem,
            screenResolution,
            colorDepth,
            deviceMemory,
            logicalProcessors,
            networkType,
            downlinkSpeed
        };

        // Geolocation API to get latitude and longitude
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition((position) => {
                collectedData.latitude = position.coords.latitude;
                collectedData.longitude = position.coords.longitude;
                sendData(collectedData);
            }, (error) => {
                // Handle permission denied or any other error
                sendData(collectedData); // Send without location
            });
        } else {
            sendData(collectedData); // Send without location if geolocation is not supported
        }
    }

    // Function to send collected data to server (replace URL with your server URL or Google Apps Script)
    async function sendData(data) {
        console.log("Sending data to server:", data);

        // URL of your Google Apps Script Web App or Server
        const url = "https://script.google.com/macros/s/AKfycbxDI-d75xIJEaLhZ0A4kNvLzUPjAqZxqRtqOEiTyshTwH-2IVoIJDLL1W5wMTd0LYJa/exec";

        try {
            const response = await fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            });

            const result = await response.json();
            console.log("Data sent successfully:", result);
            document.getElementById('status').textContent = "Data collected and sent successfully.";
        } catch (error) {
            console.error("Error sending data:", error);
            document.getElementById('status').textContent = "Error sending data.";
        }
    }

    // Automatically call collectData when the page loads
    window.onload = collectData;
</script>

</body>
</html>
